---
- name: Display current date and time in IST
  hosts: localhost
  tasks:
    - name: Get current time
      command: "date +'%Y-%m-%d %H:%M:%S %Z'"
      register: current_time

    - name: Set the timezone to IST
      set_fact:
        timezone: Asia/Kolkata

    - name: Convert to IST
      command: TZ={{ timezone }} date -d "$(cat {{ current_time.stdout }})" +'%Y-%m-%d %H:%M:%S %Z'
      register: current_time_ist

    - name: Display the current time in IST
      debug:
        var: current_time_ist.stdout
